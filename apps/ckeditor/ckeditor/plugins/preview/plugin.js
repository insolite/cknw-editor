/*
 Copyright (c) 2003-2013, CKSource - Frederico Knabben. All rights reserved.
 For licensing, see LICENSE.md or http://ckeditor.com/license
*/
(function(){var g,h={modes:{wysiwyg:1,source:1},canUndo:!1,readOnly:1,exec:function(a){var f,c=a.config,e=c.baseHref?'<base href="'+c.baseHref+'"/>':"";if(c.fullPage)f=a.getData().replace(/<head>/,"$&"+e).replace(/[^>]*(?=<\/title>)/,"$& &mdash; "+a.lang.preview.preview);else{var c="<body ",d=a.document&&a.document.getBody();d&&(d.getAttribute("id")&&(c+='id="'+d.getAttribute("id")+'" '),d.getAttribute("class")&&(c+='class="'+d.getAttribute("class")+'" '));f=a.config.docType+'<html dir="'+a.config.contentsLangDirection+
'"><head>'+e+"<title>"+a.lang.preview.preview+"</title>"+CKEDITOR.tools.buildStyleHtml(a.config.contentsCss)+"</head>"+(c+">")+a.getData()+"</body></html>"}e=640;c=420;d=80;try{var b=window.screen,e=Math.round(0.8*b.width),c=Math.round(0.7*b.height),d=Math.round(0.1*b.width)}catch(h){}if(!a.fire("contentPreview",a={dataValue:f}))return!1;b="";CKEDITOR.env.ie&&(window._cke_htmlToLoad=a.dataValue,b="javascript:void( (function(){document.open();"+("("+CKEDITOR.tools.fixDomain+")();").replace(/\/\/.*?\n/g,
"").replace(/parent\./g,"window.opener.")+"document.write( window.opener._cke_htmlToLoad );document.close();window.opener._cke_htmlToLoad = null;})() )");CKEDITOR.env.gecko&&(window._cke_htmlToLoad=a.dataValue,b=g+"preview.html");b=window.open(b,null,"toolbar=yes,location=no,status=yes,menubar=yes,scrollbars=yes,resizable=yes,width="+e+",height="+c+",left="+d);!CKEDITOR.env.ie&&!CKEDITOR.env.gecko&&(b=b.document,b.open(),b.write(a.dataValue),b.close());return!0}};CKEDITOR.plugins.add("preview",{lang:"af,ar,bg,bn,bs,ca,cs,cy,da,de,el,en,en-au,en-ca,en-gb,eo,es,et,eu,fa,fi,fo,fr,fr-ca,gl,gu,he,hi,hr,hu,id,is,it,ja,ka,km,ko,ku,lt,lv,mk,mn,ms,nb,nl,no,pl,pt,pt-br,ro,ru,si,sk,sl,sq,sr,sr-latn,sv,th,tr,ug,uk,vi,zh,zh-cn",
icons:"preview,preview-rtl",hidpi:!0,init:function(a){a.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE&&(g=this.path,a.addCommand("preview",h),a.ui.addButton&&a.ui.addButton("Preview",{label:a.lang.preview.preview,command:"preview",toolbar:"document,40"}))}})})();